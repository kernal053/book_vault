<p class="text-success"><%= notice %></p>

<% content_for :title, "Books" %>

<h1 class="my-4">Books</h1>

<div id="books" class="row row-cols-1 row-cols-md-3 g-4">
  <% @books.each do |book| %>
    <div class="col">
      <div class="card h-100">
      <% if book.cover_image.present? %>
        <%= image_tag book.cover_image.url, class: "img-fluid rounded-start", alt: book.title %>
      <% else %>
        <%= image_tag "placeholder.jpg", class: "img-fluid rounded-start", alt: "No cover image available" %>
      <% end %>
        <div class="card-body d-flex flex-column">
          <h5 class="card-title mb-2"><%= book.title %></h5>
          <p class="card-subtitle text-muted mb-3">By <%= book.author %></p>
          <%= link_to "Show", book, class: "btn btn-primary mt-auto" %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="mt-4">
  <%= link_to "New Book", new_book_path, class: "btn btn-success me-2" %>
  <% if user_signed_in? %>
    <%= link_to "Log Out", destroy_user_session_path, data: { turbo_method: :delete }, class: "btn btn-danger" %>
  <% else %>
    <%= link_to "Log In", new_user_session_path, class: "btn btn-danger" %>
  <% end %>
</div>
